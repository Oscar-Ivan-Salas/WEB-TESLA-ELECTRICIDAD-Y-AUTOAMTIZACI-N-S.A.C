\u003c!-- Modal Admin Login - Agregar antes del cierre de \u003c/body> en index.html --\u003e

\u003c!-- Botón Admin para el Header (reemplazar el botón "Evaluación Técnica" existente) --\u003e
\u003c!--
\u003cbutton onclick="openAdminLogin()"
class="px-4 py-2 bg-gray-800 border border-tesla-gold/50 rounded-lg text-xs font-semibold uppercase
hover:bg-tesla-gold/20 hover:border-tesla-gold transition-all">
🔐 Admin
\u003c/button>
--\u003e

\u003c!-- Modal de Login Admin --\u003e
\u003cdiv id="adminLoginModal" class="hidden fixed inset-0 bg-black/90 backdrop-blur-sm z-[9999] flex items-center
justify-center p-4">
\u003cdiv class="bg-gradient-to-br from-gray-900 to-black rounded-2xl shadow-2xl p-8 w-full max-w-md border-2
border-yellow-500 relative">
\u003c!-- Botón Cerrar --\u003e
\u003cbutton onclick="closeAdminLogin()" class="absolute top-4 right-4 text-gray-400 hover:text-yellow-500
transition-colors">
\u003ci class="fas fa-times text-2xl">\u003c/i>
\u003c/button>

\u003c!-- Logo y Título --\u003e
\u003cdiv class="text-center mb-8">
\u003cimg src="assets/logo.png" alt="TESLA Logo" class="h-20 w-20 mx-auto mb-4">
\u003ch1 class="text-3xl font-bold text-white mb-2">
TESLA \u003cspan class="text-yellow-500">Dashboard\u003c/span>
\u003c/h1>
\u003cp class="text-yellow-500 text-sm font-semibold">Acceso Administrativo\u003c/p>
\u003c/div>

\u003c!-- Mensaje de Error --\u003e
\u003cdiv id="adminErrorMessage" class="hidden bg-red-900/30 border-l-4 border-red-600 rounded-lg p-4 mb-6">
\u003cp class="text-sm font-semibold text-yellow-500" id="adminErrorText">\u003c/p>
\u003c/div>

\u003c!-- Formulario de Login --\u003e
\u003cform id="adminLoginForm" class="space-y-6" onsubmit="handleAdminLogin(event)">
\u003cdiv>
\u003clabel for="adminEmail" class="block text-yellow-500 text-sm font-bold mb-2">
📧 Correo Electrónico
\u003c/label>
\u003cinput type="email" id="adminEmail"
class="w-full px-4 py-3 rounded-lg bg-gray-800/80 border-2 border-yellow-500 text-white focus:outline-none
focus:border-red-600 focus:ring-2 focus:ring-red-600/20 transition-all"
placeholder="admin@tesla-electricidad.com"
required
autocomplete="email">
\u003c/div>

\u003cdiv>
\u003clabel for="adminPassword" class="block text-yellow-500 text-sm font-bold mb-2">
🔒 Contraseña
\u003c/label>
\u003cinput type="password" id="adminPassword"
class="w-full px-4 py-3 rounded-lg bg-gray-800/80 border-2 border-yellow-500 text-white focus:outline-none
focus:border-red-600 focus:ring-2 focus:ring-red-600/20 transition-all"
placeholder="••••••••"
required
autocomplete="current-password">
\u003c/div>

\u003cbutton type="submit" id="adminLoginButton"
class="w-full py-3 rounded-lg font-bold text-lg bg-gradient-to-r from-red-600 to-red-700 text-yellow-400 border-2
border-yellow-500 shadow-lg hover:from-red-700 hover:to-red-800 hover:scale-105 transition-all">
🚀 Iniciar Sesión
\u003c/button>
\u003c/form>

\u003c!-- Footer --\u003e
\u003cdiv class="mt-8 text-center">
\u003cp class="text-gray-500 text-xs">
© 2024 TESLA Electricidad y Automatización S.A.C.
\u003c/p>
\u003c/div>
\u003c/div>
\u003c/div>

\u003c!-- Script de Autenticación Admin - Agregar antes del cierre de \u003c/body> --\u003e
\u003cscript>
// Configuración Supabase (asegúrate de tener el SDK cargado)
const SUPABASE_URL = 'https://bgwovsuyjajxrmkvcggn.supabase.co';
const SUPABASE_KEY = 'sb_publishable_K-BlssTGWsG5uzY9bAnwfg_M7Zwheap';

// Inicializar Supabase solo si está disponible
let supabaseAdmin = null;
if (typeof window.supabase !== 'undefined') {
supabaseAdmin = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
}

// Abrir modal de login
function openAdminLogin() {
document.getElementById('adminLoginModal').classList.remove('hidden');
document.getElementById('adminEmail').focus();
}

// Cerrar modal de login
function closeAdminLogin() {
document.getElementById('adminLoginModal').classList.add('hidden');
document.getElementById('adminLoginForm').reset();
document.getElementById('adminErrorMessage').classList.add('hidden');
}

// Mostrar error
function showAdminError(message) {
const errorDiv = document.getElementById('adminErrorMessage');
const errorText = document.getElementById('adminErrorText');
errorText.textContent = message;
errorDiv.classList.remove('hidden');

setTimeout(() => {
errorDiv.classList.add('hidden');
}, 5000);
}

// Manejar login
async function handleAdminLogin(e) {
e.preventDefault();

if (!supabaseAdmin) {
showAdminError('❌ Error: Supabase no está cargado');
return;
}

const email = document.getElementById('adminEmail').value;
const password = document.getElementById('adminPassword').value;
const button = document.getElementById('adminLoginButton');

// Deshabilitar botón
button.disabled = true;
button.textContent = '⏳ Iniciando sesión...';

try {
const { data, error } = await supabaseAdmin.auth.signInWithPassword({
email: email,
password: password
});

if (error) {
throw error;
}

// Login exitoso
console.log('✅ Login exitoso');
window.location.href = '/dashboard.html';

} catch (error) {
console.error('❌ Error de login:', error);

// Mensajes de error personalizados
let errorMessage = 'Error al iniciar sesión';

if (error.message.includes('Invalid login credentials')) {
errorMessage = '❌ Correo o contraseña incorrectos';
} else if (error.message.includes('Email not confirmed')) {
errorMessage = '📧 Por favor confirma tu correo electrónico';
} else if (error.message.includes('network')) {
errorMessage = '🌐 Error de conexión. Verifica tu internet';
} else {
errorMessage = `❌ ${error.message}`;
}

showAdminError(errorMessage);

// Rehabilitar botón
button.disabled = false;
button.textContent = '🚀 Iniciar Sesión';
}
}

// Cerrar modal con ESC
document.addEventListener('keydown', (e) => {
if (e.key === 'Escape') {
closeAdminLogin();
}
});
\u003c/script>